import{_ as E,d as V,J as A,b as m,l as y,m as C,O as B,o as g,c as w,D as v,k as O,C as _,h as x,n as L}from"./index.93ca6e21.js";import{o as F}from"./AppControl.932a4855.js";import{c as M,u as $,i as z,r as K,m as R}from"./AppFormGroup.6dd6e794.js";const q={key:0,class:"inset-0 fixed z-10 flex items-center justify-center"},N=v("div",{class:"inset-0 absolute bg-gray-800 opacity-90 z-0"},null,-1),H=v("svg",{xmlns:"http://www.w3.org/2000/svg",width:"18",height:"18",viewBox:"0 0 94.926 94.926","xml:space":"preserve"},[v("g",null,[v("path",{d:`M55.931,47.463L94.306,9.09c0.826-0.827,0.826-2.167,0-2.994L88.833,0.62C88.436,0.224,87.896,0,87.335,0
		c-0.562,0-1.101,0.224-1.498,0.62L47.463,38.994L9.089,0.62c-0.795-0.795-2.202-0.794-2.995,0L0.622,6.096
		c-0.827,0.827-0.827,2.167,0,2.994l38.374,38.373L0.622,85.836c-0.827,0.827-0.827,2.167,0,2.994l5.473,5.476
		c0.397,0.396,0.936,0.62,1.498,0.62s1.1-0.224,1.497-0.62l38.374-38.374l38.374,38.374c0.397,0.396,0.937,0.62,1.498,0.62
		s1.101-0.224,1.498-0.62l5.473-5.476c0.826-0.827,0.826-2.167,0-2.994L55.931,47.463z`})])],-1),S=[H],D={class:"w-full border border-gray-200 p-8 rounded bg-white"},J={key:0,class:"font-bold pb-6 mb-6 border-b text-xl capitalize border-b-gray-200"},U={key:1,class:"pt-6 mt-6 border-t border-t-200"},G=V({__name:"AppPopup",props:{visible:{type:Boolean,required:!0}},emits:["update:visible"],setup(r,{emit:s}){const n=A(),t=m(null),c=y(()=>{const o=n.title();return o?o.length:0}),u=y(()=>{const o=n.footer();return o?o.length:0}),a=()=>{s("update:visible",!1)},f=o=>{o.key==="Escape"&&a()};return F(t,()=>{a()}),C(()=>{document.addEventListener("keydown",f)}),B(()=>{document.removeEventListener("keydown",f)}),(o,i)=>r.visible?(g(),w("div",q,[N,v("div",{ref_key:"popupRef",ref:t,class:"w-full relative z-10 xs:max-w-xs sm:max-w-sm md:max-w-md lg:max-w-lg"},[v("div",{onClick:a,class:"h-10 w-10 rounded-full bg-white flex items-center justify-center absolute top-0 right-0 -translate-y-1/3 translate-x-1/3 shadow cursor-pointer hover:scale-110"},S),v("div",D,[O(c)?(g(),w("h3",J,[_(o.$slots,"title")])):x("v-if",!0),_(o.$slots,"content"),O(u)?(g(),w("div",U,[_(o.$slots,"footer",{close:a})])):x("v-if",!0)])],512)])):x("v-if",!0)}});var se=E(G,[["__file","/home/dmitry/PhpstormProjects/school-manager-web/src/frontend/components/AppPopup.vue"]]);const I={state:!1,onClose:()=>{},onOpen:()=>{}},oe=(r=I)=>{const{state:s=!1,onOpen:n,onClose:t}=r,c=m(s),u=()=>{c.value=!0},a=()=>{c.value=!1};return L(c,f=>f?typeof n=="function"&&n():typeof t=="function"&&t()),{visible:c,close:a,open:u}};function re(r,s){const n=Object.values(r),t=m(""),c=o=>typeof o!="undefined"?t.value===o:t.value!=="",u=o=>{!n.includes(o)||(t.value=o)},a=()=>{t.value=""},f=()=>t.value;return L(t,()=>{typeof s=="function"&&s()}),{is:c,set:u,reset:a,value:f}}const Q=(r,s)=>M.withMessage(r,s),P={integer:()=>z,required:()=>K,minLength:r=>R(r)},W=Object.keys(P),X=(r,s)=>W.includes(r)?P[r](s):s;function Y(r,s,n){const t=Object.keys(s),c=t.reduce((i,d)=>{const h=Object.entries(s[d]);if(h.length)for(const k of[...h]){i[d]||(i[d]={});const[l,e]=k,p=n[d],b=p?p[l]:"",j=X(l,e);i[d][l]=b?Q(b,j):j}return i},{}),u=$(c,r),a=t.reduce((i,d)=>(i[d]=y(()=>u.value[d]?u.value[d].$errors:[]),i),{});return{validate:()=>u.value.$validate().then(i=>Promise.resolve(i)),errors:a,reset:()=>{u.value.$reset()}}}class Z extends Error{constructor(s){super(s),this.name="FormValidationError"}}function ne(r){const{onValidated:s,onError:n,initialValues:t={},validation:c,validationMessages:u={}}=r,a=Object.keys(t).reduce((l,e)=>(Array.isArray(t[e])?l[e]=m(t[e].slice()):l[e]=m(t[e]),l),{}),o=(c?Object.keys(c):[]).reduce((l,e)=>(l[e]=y(()=>[]),l),{}),i=c?Y(a,c,u):null,d=(l=!0)=>new Promise(e=>{i&&l?i.validate().then(p=>{e(p)}):e(!0)}).then(e=>new Promise((p,b)=>e?p(void 0):b(new Z("Form is invalid.")))).then(()=>{if(typeof s=="function")return s()}).catch(e=>{if(typeof n=="function")return n(e)}),h=()=>{const l=Object.keys(t);for(const e of l)Array.isArray(t[e])?a[e].value=t[e].slice():a[e].value=t[e];i&&i.reset()};return{fields:a,values:()=>Object.keys(a).reduce((l,e)=>(l[e]=a[e].value,l),{}),errors:i?i.errors:o,submit:d,reset:h}}const ae=r=>n=>{typeof n=="object"&&n.name&&n.name==="FormValidationError"||console.error(n)};export{se as A,re as a,ne as b,ae as c,oe as u};
